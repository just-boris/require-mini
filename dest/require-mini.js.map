{"version":3,"sources":["require-mini.js"],"names":["global","deepmerge","target","src","array","Array","isArray","dst","concat","forEach","e","i","indexOf","push","Object","keys","key","getGlobal","value","split","reduce","obj","prop","window","defer","result","promise","Promise","resolve","reject","invokeLater","context","fn","cleanup","pendingModule","lastTask","then","loadDep","name","path","config","shim","loadByShim","deferred","loadScript","Error","_require","deps","exportsFn","init","exports","el","require","load","toUrl","onerror","onload","loadWithPlugin","dependency","index","plugin","substr","localRequire","resolved","apply","arguments","error","fromText","text","previousModule","Function","factory","errback","currentModule","slice","all","map","join","newPath","locals","modules","predefines","instances","module","reason","onError","appendJS","bundle","bundles","filter","paths","test","baseUrl","urlArgs","define","asyncFlush","asyncQueue","length","asyncTimer","asyncCall","callback","arg","asyncSetTimer","invokeResolver","resolver","resolvePromise","rejectPromise","invokeCallback","subscriber","owner","settled","state_","data_","FULFILLED","handleThenable","REJECTED","TypeError","call","val","fulfill","PENDING","SEALED","publishFulfillment","publishRejection","publish","then_","this","NativePromise","nativePromiseSupported","r","NOOP","setImmediate","setTimeout","prototype","constructor","undefined","onFulfillment","onRejection","fulfilled","rejected","catch","promises","Class","remaining","results","race","moduleName","id","resetContext","options","url","document","createElement","async","getElementsByTagName","appendChild","specified","hasOwnProperty","console","amd","requirejs"],"mappings":"CAAA,SAAUA,GA0UN,QAASC,GAAUC,EAAQC,GACvB,GAAIC,GAAQC,MAAMC,QAAQH,GACtBI,EAAMH,SAoCV,OAlCIA,IACAF,EAASA,MACTK,EAAMA,EAAIC,OAAON,GACjBC,EAAIM,QAAQ,SAASC,EAAGC,GACE,SAAXJ,EAAII,GACXJ,EAAII,GAAKD,EACW,gBAANA,GACdH,EAAII,GAAKV,EAAUC,EAAOS,GAAID,GAEJ,KAAtBR,EAAOU,QAAQF,IACfH,EAAIM,KAAKH,OAKjBR,GAA4B,gBAAXA,IACjBY,OAAOC,KAAKb,GAAQO,QAAQ,SAAUO,GAClCT,EAAIS,GAAOd,EAAOc,KAG1BF,OAAOC,KAAKZ,GAAKM,QAAQ,SAAUO,GAQvBT,EAAIS,GAPY,gBAAbb,GAAIa,IAAsBb,EAAIa,IAIhCd,EAAOc,GAGGf,EAAUC,EAAOc,GAAMb,EAAIa,IAN/Bb,EAAIa,MAYpBT,EAIX,QAASU,GAAUC,GACf,MAAOA,GAAMC,MAAM,KAAKC,OAAO,SAAUC,EAAKC,GAC1C,MAAOD,IAAOA,EAAIC,IACnBC,QAGP,QAASC,KACL,GAAIC,KAKJ,OAJAA,GAAOC,QAAU,GAAIC,SAAQ,SAASC,EAASC,GAC3CJ,EAAOG,QAAUA,EACjBH,EAAOI,OAASA,IAEbJ,EAEX,QAASK,GAAYC,EAASC,GAK1B,QAASC,KACLC,EAAgB,KALpBC,EAAWA,EAASC,KAAK,WAErB,MADAF,GAAgBH,EACTC,MACRI,KAAKH,EAASA,GAMrB,QAASI,GAAQC,EAAMC,GACnB,GAAGC,EAAOC,KAAKH,GACX,MAAOI,GAAWJ,EAAMC,EAExB,IAAII,GAAWnB,GAQf,OAPAmB,GAASL,KAAOA,EAChBK,EAASJ,KAAOA,EAChBT,EAAYa,EAAU,WAClB,MAAOC,GAAWN,GAAXM,SAAuB,WAC1BD,EAASd,OAAWgB,MAAM,+BAA+BP,EAAK,UAG/DK,EAASjB,QAGxB,QAASgB,GAAWJ,EAAMC,GACtB,GAAIE,GAAOD,EAAOC,KAAKH,EACvB,OAAOQ,GAASL,EAAKM,SAAY,WAC7B,MAAOH,GAAWN,GAAMF,KAAKK,EAAKO,WAAa,WAC3C,MAAQP,GAAKQ,MAAQR,EAAKQ,QAAWhC,EAAUwB,EAAKS,YAEzD,KAAMX,GAEb,QAASK,GAAWN,GAChB,MAAO,IAAIX,SAAQ,SAASC,EAASC,GACjC,GAAIsB,GAAKC,EAAQC,KAAK,KAAMf,EAAMgB,EAAMhB,GAAM,GAC9Ca,GAAGI,QAAU1B,EACbsB,EAAGK,OAAS5B,IAIpB,QAAS6B,GAAeC,EAAYnB,GAChC,GAAIoB,GAAQD,EAAW9C,QAAQ,KAC3BgD,EAASF,EAAWG,OAAO,EAAGF,EAElC,OADAD,GAAaA,EAAWG,OAAOF,EAAM,GAC9Bb,GAAUc,GAAS,SAASA,GAC/B,MAAO,IAAIjC,SAAQ,SAASC,EAASC,GACjC,QAASiC,KACL,MAAIC,GAAJ,OACWX,EAAQY,MAAM,KAAMC,WAGnCnD,OAAOC,KAAKqC,GAAS3C,QAAQ,SAASO,GAClC8C,EAAa9C,GAAOoC,EAAQpC,IAEhC,IAAI+C,IAAW,CACfnC,GAAQsC,MAAQrC,EAChBD,EAAQuC,SAAW,SAAS7B,EAAM8B,GAC1BA,IACAA,EAAO9B,EAEX,IAAI+B,GAAiBnC,CACrBA,IAAiBI,KAAMA,EAAMV,QAASA,EAASC,OAAQA,EAAQU,KAAMA,GAEhE+B,SAASF,KAEdlC,EAAgBmC,EAChBN,GAAW,GAEfH,EAAOP,KAAKK,EAAYI,EAAclC,EAASY,MAEpD,KAAMD,GAEb,QAASO,GAASC,EAAMwB,EAASC,EAASjC,GACtC,GAAIkC,GAAgBlC,EAAKmC,MAAM,IAAI,EACnC,OAAO,IAAI/C,SAAQ,SAASC,EAASC,GACjCF,QAAQgD,IAAI5B,EAAK6B,IAAI,SAAUlB,GAC3B,GAAGnB,EAAK3B,QAAQ8C,GAAc,GAC1B,MAAO/B,SAAQE,OAAWgB,MAAM,wBAAwBN,EAAK/B,OAAOkD,GAAYmB,KAAK,SAEzF,IAAIC,GAAUvC,EAAK/B,OAAOkD,EAC1B,OAAGqB,GAAOrB,GACCqB,EAAOrB,GAAYe,IAE3Bf,EAAW9C,QAAQ,KAAO,KACzBoE,EAAQtB,GAAcD,EAAeC,EAAYoB,IAElDG,EAAWvB,GACVsB,EAAQtB,GAAc/B,QAAQC,UAAUQ,KAAK,WACzC,MAAOU,GAASkB,MAAM,KAAMiB,EAAWvB,GAAYlD,QAAQsE,OAGzDE,EAAQtB,KACdsB,EAAQtB,GAAcrB,EAAQqB,EAAYoB,IAEvCE,EAAQtB,OACftB,KAAKR,EAASC,KACnBO,KAAK,SAAU8C,GACd,GAAIzD,GAAS8C,EAAQP,MAAM,KAAMkB,EACjC,OAAOT,IAAiBO,EAAQP,GAAeU,QAAUH,EAAQP,GAAeU,OAAOjC,SAAWzB,GACnG,SAAS2D,GAKR,MAJsB,kBAAZZ,IACNA,EAAQY,GAEZhC,EAAQiC,QAAQD,GACTzD,QAAQE,OAAOuD,KAI9B,QAAShC,GAAQL,EAAMwB,EAASC,GAC5B,MAAO1B,GAASC,EAAMwB,EAASC,MAgDnC,QAASlB,GAAMhB,EAAMgD,GACjB,GAAIC,GAASzE,OAAOC,KAAKyB,EAAOgD,SAASC,OAAO,SAASF,GACrD,MAAO/C,GAAOgD,QAAQD,GAAQ3E,QAAQ0B,GAAQ,KAC/C,EACH,OAAGiD,GACQnC,EAAQE,MAAMiC,IAEtB/C,EAAOkD,MAAMpD,KACZA,EAAOE,EAAOkD,MAAMpD,IAEpB,qBAAqBqD,KAAKrD,KAC1BA,EAAOE,EAAOoD,QAAUtD,GAEzBgD,IACChD,GAAQ,OAETE,EAAOqD,UACNvD,GAAQ,IAAIE,EAAOqD,SAEhBvD,GAeX,QAASwD,GAAOxD,EAAMS,EAAMwB,GACL,gBAATjC,KACNiC,EAAUxB,EACVA,EAAOT,EACPA,EAAO,MAEPjC,MAAMC,QAAQyC,KACdwB,EAAUxB,EACVA,KAEJ,IAAIJ,GAAWT,CACf,IAAY,OAATI,IAAkBK,EACjB,KAAUE,OAAM,qBACb,IAAa,OAATP,GAAiBK,GAAYA,EAASL,OAASA,EAAM,CAC5D,GAAI6C,GAASrC,EAASC,EAAMwB,EAAS5B,EAASd,OAAQc,EAASJ,KAC/DI,GAASf,QAAQuD,OAEjBF,GAAW3C,IAASS,EAAMwB,EAAS,OAllB3C,SAAUvE,GAwDV,QAAS+F,KAEP,IAAK,GAAIpF,GAAI,EAAGA,EAAIqF,EAAWC,OAAQtF,IACrCqF,EAAWrF,GAAG,GAAGqF,EAAWrF,GAAG,GAGjCqF,MACAE,GAAa,EAGf,QAASC,GAAUC,EAAUC,GAC3BL,EAAWnF,MAAMuF,EAAUC,IAEtBH,IAEHA,GAAa,EACbI,EAAcP,EAAY,IAK9B,QAASQ,GAAeC,EAAU9E,GAChC,QAAS+E,GAAevF,GACtBU,EAAQF,EAASR,GAGnB,QAASwF,GAActB,GACrBvD,EAAOH,EAAS0D,GAGlB,IACEoB,EAASC,EAAgBC,GACzB,MAAMhG,GACNgG,EAAchG,IAIlB,QAASiG,GAAeC,GACtB,GAAIC,GAAQD,EAAWC,MACnBC,EAAUD,EAAME,OAChB7F,EAAQ2F,EAAMG,MACdZ,EAAWQ,EAAWE,GACtBpF,EAAUkF,EAAWxE,IAEzB,IAAwB,kBAAbgE,GACX,CACEU,EAAUG,CACV,KACE/F,EAAQkF,EAASlF,GACjB,MAAMR,GACNmB,EAAOH,EAAShB,IAIfwG,EAAexF,EAASR,KAEvB4F,IAAYG,GACdrF,EAAQF,EAASR,GAEf4F,IAAYK,GACdtF,EAAOH,EAASR,IAItB,QAASgG,GAAexF,EAASR,GAC/B,GAAI6C,EAEJ,KACE,GAAIrC,IAAYR,EACd,KAAM,IAAIkG,WAAU,uDAEtB,IAAIlG,IAA2B,kBAAVA,IAAyC,gBAAVA,IACpD,CACE,GAAIkB,GAAOlB,EAAMkB,IAEjB,IAAoB,kBAATA,GAqBT,MAnBAA,GAAKiF,KAAKnG,EAAO,SAASoG,GACnBvD,IAEHA,GAAW,EAEP7C,IAAUoG,EACZ1F,EAAQF,EAAS4F,GAEjBC,EAAQ7F,EAAS4F,KAEpB,SAASlC,GACLrB,IAEHA,GAAW,EAEXlC,EAAOH,EAAS0D,OAIb,GAGX,MAAO1E,GAIP,MAHKqD,IACHlC,EAAOH,EAAShB,IAEX,EAGT,OAAO,EAGT,QAASkB,GAAQF,EAASR,GACpBQ,IAAYR,GAAUgG,EAAexF,EAASR,IAChDqG,EAAQ7F,EAASR,GAGrB,QAASqG,GAAQ7F,EAASR,GACpBQ,EAAQqF,SAAWS,IAErB9F,EAAQqF,OAASU,EACjB/F,EAAQsF,MAAQ9F,EAEhBiF,EAAUuB,EAAoBhG,IAIlC,QAASG,GAAOH,EAAS0D,GACnB1D,EAAQqF,SAAWS,IAErB9F,EAAQqF,OAASU,EACjB/F,EAAQsF,MAAQ5B,EAEhBe,EAAUwB,EAAkBjG,IAIhC,QAASkG,GAAQlG,GACfA,EAAQmG,MAAQnG,EAAQmG,MAAMpH,QAAQkG,GAGxC,QAASe,GAAmBhG,GAC1BA,EAAQqF,OAASE,EACjBW,EAAQlG,GAGV,QAASiG,GAAiBjG,GACxBA,EAAQqF,OAASI,EACjBS,EAAQlG,GAMV,QAASC,GAAQ6E,GACf,GAAwB,kBAAbA,GACT,KAAM,IAAIY,WAAU,gDAEtB,IAAIU,eAAgBnG,KAAY,EAC9B,KAAM,IAAIyF,WAAU,wHAEtBU,MAAKD,SAELtB,EAAeC,EAAUsB,MAlN3B,GAAIC,GAAgB/H,EAAgB,QAChCgI,EACFD,GAGA,WAAaA,IACb,UAAYA,IACZ,OAASA,IACT,QAAUA,IAGV,WACE,GAAInG,EAEJ,OADA,IAAImG,GAAc,SAASE,GAAIrG,EAAUqG,IACf,kBAAZrG,KAQK,oBAAZsB,UAA2BA,QAGpCA,QAAQvB,QAAUA,GAAWoG,EAKxBC,IACHhI,EAAgB,QAAI2B,EAQxB,IASIuE,GATAsB,EAAU,UACVC,EAAS,SACTR,EAAY,YACZE,EAAW,WACXe,EAAO,aAGP5B,EAAwC,mBAAjB6B,cAA+BA,aAAeC,WACrEpC,IAsKJrE,GAAQ0G,WACNC,YAAa3G,EAEboF,OAAQS,EACRK,MAAO,KACPb,MAAOuB,OAEPnG,KAAM,SAASoG,EAAeC,GAC5B,GAAI7B,IACFC,MAAOiB,KACP1F,KAAM,GAAI0F,MAAKQ,YAAYJ,GAC3BQ,UAAWF,EACXG,SAAUF,EAcZ,OAXIX,MAAKf,SAAWE,GAAaa,KAAKf,SAAWI,EAG/ChB,EAAUQ,EAAgBC,GAK1BkB,KAAKD,MAAMhH,KAAK+F,GAGXA,EAAWxE,MAGpBwG,QAAS,SAASH,GAChB,MAAOX,MAAK1F,KAAK,KAAMqG,KAI3B9G,EAAQgD,IAAM,SAASkE,GACrB,GAAIC,GAAQhB,IAEZ,KAAKzH,MAAMC,QAAQuI,GACjB,KAAM,IAAIzB,WAAU,2CAEtB,OAAO,IAAI0B,GAAM,SAASlH,EAASC,GAIjC,QAAS2E,GAAS7C,GAEhB,MADAoF,KACO,SAAS7H,GACd8H,EAAQrF,GAASzC,IACV6H,GACLnH,EAAQoH,IAId,IAAK,GAAWtH,GAZZsH,KACAD,EAAY,EAWPpI,EAAI,EAAYA,EAAIkI,EAAS5C,OAAQtF,IAE5Ce,EAAUmH,EAASlI,GAEfe,GAAmC,kBAAjBA,GAAQU,KAC5BV,EAAQU,KAAKoE,EAAS7F,GAAIkB,GAE1BmH,EAAQrI,GAAKe,CAGZqH,IACHnH,EAAQoH,MAIdrH,EAAQsH,KAAO,SAASJ,GACtB,GAAIC,GAAQhB,IAEZ,KAAKzH,MAAMC,QAAQuI,GACjB,KAAM,IAAIzB,WAAU,4CAEtB,OAAO,IAAI0B,GAAM,SAASlH,EAASC,GACjC,IAAK,GAAWH,GAAPf,EAAI,EAAYA,EAAIkI,EAAS5C,OAAQtF,IAE5Ce,EAAUmH,EAASlI,GAEfe,GAAmC,kBAAjBA,GAAQU,KAC5BV,EAAQU,KAAKR,EAASC,GAEtBD,EAAQF,MAKhBC,EAAQC,QAAU,SAASV,GACzB,GAAI4H,GAAQhB,IAEZ,OAAI5G,IAA0B,gBAAVA,IAAsBA,EAAMoH,cAAgBQ,EACvD5H,EAEF,GAAI4H,GAAM,SAASlH,GACxBA,EAAQV,MAIZS,EAAQE,OAAS,SAASuD,GACxB,GAAI0D,GAAQhB,IAEZ,OAAO,IAAIgB,GAAM,SAASlH,EAASC,GACjCA,EAAOuD,OAIJd,SAAS,iBA4KhB,IAAIU,GAASC,EAAYzC,EAAQL,EAAUD,EACvC6C,GACI3B,QAAS,WACL,MAAOA,IAEX+B,OAAQ,SAAS+D,GACb,GAAI/D,GAASH,EAAQkE,EACrB,KAAI/D,EACA,KAAUtC,OAAM,qDAEpB,OAAQsC,GAAOA,OAASA,EAAOA,SAC3BgE,GAAID,EACJ1G,OAAQ,WACJ,MAAOA,GAAOA,OAAO0G,UAIjChG,QAAS,SAASgG,GACd,MAAQnE,GAAOI,OAAO+D,GAAYhG,YAG9CE,GAAQgG,aAAe,WACnB5G,GACIqD,QAAS,GACTD,QAAS,KACTF,SACAjD,QACA+C,WACAhD,WAEJwC,KACAC,KACA9C,EAAWR,QAAQC,UACnBM,EAAgB,MAEpBkB,EAAQZ,OAAS,SAAS6G,GACtB7G,EAASvC,EAAUuC,EAAQ6G,IAE/BjG,EAAQC,KAAO,SAAUtB,EAASO,EAAMgH,GACpC,GAAInG,GAAKoG,SAASC,cAAc,SAIhC,OAHArG,GAAGhD,IAAMmJ,EACTnG,EAAGsG,OAAQ,EACXF,SAASG,qBAAqB,QAAQ,GAAGC,YAAYxG,GAC9CA,GAyBXC,EAAQE,MAAQ,SAAShB,GACrB,MAAOgB,GAAMhB,GAAM,IAEvBc,EAAQwG,UAAY,SAAStH,GACzB,MAAO0C,GAAQ6E,eAAevH,IAElCc,EAAQiC,QAAU,SAASD,GACvB0E,QAAQ5F,MAAMkB,IAGlBhC,EAAQgG,eAsBRtD,EAAOiE,OAIP/J,EAAO8F,OAASA,EAChB9F,EAAOoD,QAAUA,EACjBpD,EAAOgK,UAAY5G,GACpB7B","file":"require-mini.js","sourcesContent":["(function(global) {\n    (function(global){\n    \n    //\n    // Check for native Promise and it has correct interface\n    //\n    \n    var NativePromise = global['Promise'];\n    var nativePromiseSupported =\n      NativePromise &&\n      // Some of these methods are missing from\n      // Firefox/Chrome experimental implementations\n      'resolve' in NativePromise &&\n      'reject' in NativePromise &&\n      'all' in NativePromise &&\n      'race' in NativePromise &&\n      // Older version of the spec had a resolver object\n      // as the arg rather than a function\n      (function(){\n        var resolve;\n        new NativePromise(function(r){ resolve = r; });\n        return typeof resolve === 'function';\n      })();\n    \n    \n    //\n    // export if necessary\n    //\n    \n    if (typeof exports !== 'undefined' && exports)\n    {\n      // node.js\n      exports.Promise = Promise || NativePromise;\n    }\n    else\n    {\n      // in browser add to global\n      if (!nativePromiseSupported)\n        global['Promise'] = Promise;\n    }\n    \n    \n    //\n    // Polyfill\n    //\n    \n    var PENDING = 'pending';\n    var SEALED = 'sealed';\n    var FULFILLED = 'fulfilled';\n    var REJECTED = 'rejected';\n    var NOOP = function(){};\n    \n    // async calls\n    var asyncSetTimer = typeof setImmediate !== 'undefined' ? setImmediate : setTimeout;\n    var asyncQueue = [];\n    var asyncTimer;\n    \n    function asyncFlush(){\n      // run promise callbacks\n      for (var i = 0; i < asyncQueue.length; i++)\n        asyncQueue[i][0](asyncQueue[i][1]);\n    \n      // reset async asyncQueue\n      asyncQueue = [];\n      asyncTimer = false;\n    }\n    \n    function asyncCall(callback, arg){\n      asyncQueue.push([callback, arg]);\n    \n      if (!asyncTimer)\n      {\n        asyncTimer = true;\n        asyncSetTimer(asyncFlush, 0);\n      }\n    }\n    \n    \n    function invokeResolver(resolver, promise) {\n      function resolvePromise(value) {\n        resolve(promise, value);\n      }\n    \n      function rejectPromise(reason) {\n        reject(promise, reason);\n      }\n    \n      try {\n        resolver(resolvePromise, rejectPromise);\n      } catch(e) {\n        rejectPromise(e);\n      }\n    }\n    \n    function invokeCallback(subscriber){\n      var owner = subscriber.owner;\n      var settled = owner.state_;\n      var value = owner.data_;  \n      var callback = subscriber[settled];\n      var promise = subscriber.then;\n    \n      if (typeof callback === 'function')\n      {\n        settled = FULFILLED;\n        try {\n          value = callback(value);\n        } catch(e) {\n          reject(promise, e);\n        }\n      }\n    \n      if (!handleThenable(promise, value))\n      {\n        if (settled === FULFILLED)\n          resolve(promise, value);\n    \n        if (settled === REJECTED)\n          reject(promise, value);\n      }\n    }\n    \n    function handleThenable(promise, value) {\n      var resolved;\n    \n      try {\n        if (promise === value)\n          throw new TypeError('A promises callback cannot return that same promise.');\n    \n        if (value && (typeof value === 'function' || typeof value === 'object'))\n        {\n          var then = value.then;  // then should be retrived only once\n    \n          if (typeof then === 'function')\n          {\n            then.call(value, function(val){\n              if (!resolved)\n              {\n                resolved = true;\n    \n                if (value !== val)\n                  resolve(promise, val);\n                else\n                  fulfill(promise, val);\n              }\n            }, function(reason){\n              if (!resolved)\n              {\n                resolved = true;\n    \n                reject(promise, reason);\n              }\n            });\n    \n            return true;\n          }\n        }\n      } catch (e) {\n        if (!resolved)\n          reject(promise, e);\n    \n        return true;\n      }\n    \n      return false;\n    }\n    \n    function resolve(promise, value){\n      if (promise === value || !handleThenable(promise, value))\n        fulfill(promise, value);\n    }\n    \n    function fulfill(promise, value){\n      if (promise.state_ === PENDING)\n      {\n        promise.state_ = SEALED;\n        promise.data_ = value;\n    \n        asyncCall(publishFulfillment, promise);\n      }\n    }\n    \n    function reject(promise, reason){\n      if (promise.state_ === PENDING)\n      {\n        promise.state_ = SEALED;\n        promise.data_ = reason;\n    \n        asyncCall(publishRejection, promise);\n      }\n    }\n    \n    function publish(promise) {\n      promise.then_ = promise.then_.forEach(invokeCallback);\n    }\n    \n    function publishFulfillment(promise){\n      promise.state_ = FULFILLED;\n      publish(promise);\n    }\n    \n    function publishRejection(promise){\n      promise.state_ = REJECTED;\n      publish(promise);\n    }\n    \n    /**\n    * @class\n    */\n    function Promise(resolver){\n      if (typeof resolver !== 'function')\n        throw new TypeError('Promise constructor takes a function argument');\n    \n      if (this instanceof Promise === false)\n        throw new TypeError('Failed to construct \\'Promise\\': Please use the \\'new\\' operator, this object constructor cannot be called as a function.');\n    \n      this.then_ = [];\n    \n      invokeResolver(resolver, this);\n    }\n    \n    Promise.prototype = {\n      constructor: Promise,\n    \n      state_: PENDING,\n      then_: null,\n      data_: undefined,\n    \n      then: function(onFulfillment, onRejection){\n        var subscriber = {\n          owner: this,\n          then: new this.constructor(NOOP),\n          fulfilled: onFulfillment,\n          rejected: onRejection\n        };\n    \n        if (this.state_ === FULFILLED || this.state_ === REJECTED)\n        {\n          // already resolved, call callback async\n          asyncCall(invokeCallback, subscriber);\n        }\n        else\n        {\n          // subscribe\n          this.then_.push(subscriber);\n        }\n    \n        return subscriber.then;\n      },\n    \n      'catch': function(onRejection) {\n        return this.then(null, onRejection);\n      }\n    };\n    \n    Promise.all = function(promises){\n      var Class = this;\n    \n      if (!Array.isArray(promises))\n        throw new TypeError('You must pass an array to Promise.all().');\n    \n      return new Class(function(resolve, reject){\n        var results = [];\n        var remaining = 0;\n    \n        function resolver(index){\n          remaining++;\n          return function(value){\n            results[index] = value;\n            if (!--remaining)\n              resolve(results);\n          };\n        }\n    \n        for (var i = 0, promise; i < promises.length; i++)\n        {\n          promise = promises[i];\n    \n          if (promise && typeof promise.then === 'function')\n            promise.then(resolver(i), reject);\n          else\n            results[i] = promise;\n        }\n    \n        if (!remaining)\n          resolve(results);\n      });\n    };\n    \n    Promise.race = function(promises){\n      var Class = this;\n    \n      if (!Array.isArray(promises))\n        throw new TypeError('You must pass an array to Promise.race().');\n    \n      return new Class(function(resolve, reject) {\n        for (var i = 0, promise; i < promises.length; i++)\n        {\n          promise = promises[i];\n    \n          if (promise && typeof promise.then === 'function')\n            promise.then(resolve, reject);\n          else\n            resolve(promise);\n        }\n      });\n    };\n    \n    Promise.resolve = function(value){\n      var Class = this;\n    \n      if (value && typeof value === 'object' && value.constructor === Class)\n        return value;\n    \n      return new Class(function(resolve){\n        resolve(value);\n      });\n    };\n    \n    Promise.reject = function(reason){\n      var Class = this;\n    \n      return new Class(function(resolve, reject){\n        reject(reason);\n      });\n    };\n    \n    })(new Function('return this')());\n    \n\n    /* brought from https://github.com/KyleAMathews/deepmerge and unwrapped from UMD */\n    function deepmerge(target, src) {\n        var array = Array.isArray(src);\n        var dst = array && [] || {};\n    \n        if (array) {\n            target = target || [];\n            dst = dst.concat(target);\n            src.forEach(function(e, i) {\n                if (typeof dst[i] === 'undefined') {\n                    dst[i] = e;\n                } else if (typeof e === 'object') {\n                    dst[i] = deepmerge(target[i], e);\n                } else {\n                    if (target.indexOf(e) === -1) {\n                        dst.push(e);\n                    }\n                }\n            });\n        } else {\n            if (target && typeof target === 'object') {\n                Object.keys(target).forEach(function (key) {\n                    dst[key] = target[key];\n                });\n            }\n            Object.keys(src).forEach(function (key) {\n                if (typeof src[key] !== 'object' || !src[key]) {\n                    dst[key] = src[key];\n                }\n                else {\n                    if (!target[key]) {\n                        dst[key] = src[key];\n                    } else {\n                        dst[key] = deepmerge(target[key], src[key]);\n                    }\n                }\n            });\n        }\n    \n        return dst;\n    }\n    \n\n    function getGlobal(value) {\n        return value.split('.').reduce(function (obj, prop) {\n            return obj && obj[prop];\n        }, window);\n    }\n    \n    function defer() {\n        var result = {};\n        result.promise = new Promise(function(resolve, reject) {\n            result.resolve = resolve;\n            result.reject = reject;\n        });\n        return result;\n    }\n    function invokeLater(context, fn) {\n        lastTask = lastTask.then(function() {\n            pendingModule = context;\n            return fn();\n        }).then(cleanup, cleanup);\n        function cleanup() {\n            pendingModule = null;\n        }\n    }\n    \n    function loadDep(name, path) {\n        if(config.shim[name]) {\n            return loadByShim(name, path);\n        } else {\n            var deferred = defer();\n            deferred.name = name;\n            deferred.path = path;\n            invokeLater(deferred, function() {\n                return loadScript(name).catch(function() {\n                    deferred.reject(new Error('Error while loading module \"'+name+'\"'));\n                });\n            });\n            return deferred.promise;\n        }\n    }\n    function loadByShim(name, path) {\n        var shim = config.shim[name];\n        return _require(shim.deps || [], function() {\n            return loadScript(name).then(shim.exportsFn || function() {\n                return (shim.init && shim.init()) || getGlobal(shim.exports);\n            });\n        }, null, path);\n    }\n    function loadScript(name) {\n        return new Promise(function(resolve, reject) {\n            var el = require.load(null, name, toUrl(name, true));\n            el.onerror = reject;\n            el.onload = resolve;\n        });\n    }\n    \n    function loadWithPlugin(dependency, path) {\n        var index = dependency.indexOf('!'),\n            plugin = dependency.substr(0, index);\n        dependency = dependency.substr(index+1);\n        return _require([plugin], function(plugin) {\n            return new Promise(function(resolve, reject) {\n                function localRequire() {\n                    if(!resolved) {\n                        return require.apply(null, arguments);\n                    }\n                }\n                Object.keys(require).forEach(function(key) {\n                    localRequire[key] = require[key];\n                });\n                var resolved = false;\n                resolve.error = reject;\n                resolve.fromText = function(name, text) {\n                    if(!text) {\n                        text = name;\n                    }\n                    var previousModule = pendingModule;\n                    pendingModule = {name: name, resolve: resolve, reject: reject, path: path};\n                    /* jshint -W054 */\n                    (new Function(text))();\n                    /* jshint +W054 */\n                    pendingModule = previousModule;\n                    resolved = true;\n                };\n                plugin.load(dependency, localRequire, resolve, config);\n            });\n        }, null, path);\n    }\n    function _require(deps, factory, errback, path) {\n        var currentModule = path.slice(-1)[0];\n        return new Promise(function(resolve, reject) {\n            Promise.all(deps.map(function (dependency) {\n                if(path.indexOf(dependency) > -1) {\n                    return Promise.reject(new Error('Circular dependency: '+path.concat(dependency).join(' -> ')));\n                }\n                var newPath = path.concat(dependency);\n                if(locals[dependency]) {\n                    return locals[dependency](currentModule);\n                }\n                if(dependency.indexOf('!') > -1) {\n                    modules[dependency] = loadWithPlugin(dependency, newPath);\n                }\n                if(predefines[dependency]) {\n                    modules[dependency] = Promise.resolve().then(function() {\n                        return _require.apply(null, predefines[dependency].concat([newPath]));\n                    });\n                }\n                else if (!modules[dependency]) {\n                    modules[dependency] = loadDep(dependency, newPath);\n                }\n                return modules[dependency];\n            })).then(resolve, reject);\n        }).then(function (instances) {\n            var result = factory.apply(null, instances);\n            return currentModule && modules[currentModule].module && modules[currentModule].module.exports || result;\n        }, function(reason) {\n            if(typeof errback === 'function') {\n                errback(reason);\n            }\n            require.onError(reason);\n            return Promise.reject(reason);\n        });\n    }\n    \n    function require(deps, factory, errback) {\n        return _require(deps, factory, errback, []);\n    }\n    var modules, predefines, config, lastTask, pendingModule,\n        locals = {\n            require: function(moduleName) {\n                return require;\n            },\n            module: function(moduleName) {\n                var module = modules[moduleName];\n                if(!module) {\n                    throw new Error('Module \"module\" should be required only by modules');\n                }\n                return (module.module = module.module || {\n                    id: moduleName,\n                    config: function () {\n                        return config.config[moduleName] || {};\n                    }\n                });\n            },\n            exports: function(moduleName) {\n                return (locals.module(moduleName).exports = {});\n            }\n        };\n    require.resetContext = function() {\n        config = {\n            urlArgs: '',\n            baseUrl: './',\n            paths: {},\n            shim: {},\n            bundles: {},\n            config: {}\n        };\n        modules = {};\n        predefines = {};\n        lastTask = Promise.resolve();\n        pendingModule = null;\n    };\n    require.config = function(options) {\n        config = deepmerge(config, options);\n    };\n    require.load = function (context, name, url) {\n        var el = document.createElement(\"script\");\n        el.src = url;\n        el.async = true;\n        document.getElementsByTagName('body')[0].appendChild(el);\n        return el;\n    };\n    \n    function toUrl(name, appendJS) {\n        var bundle = Object.keys(config.bundles).filter(function(bundle) {\n            return config.bundles[bundle].indexOf(name) > -1;\n        })[0];\n        if(bundle) {\n            return require.toUrl(bundle);\n        }\n        if(config.paths[name]) {\n            name = config.paths[name];\n        }\n        if(!/^([\\w\\+\\.\\-]+:)?\\//.test(name)) {\n            name = config.baseUrl + name;\n        }\n        if(appendJS) {\n            name += '.js';\n        }\n        if(config.urlArgs) {\n            name += '?'+config.urlArgs;\n        }\n        return name;\n    }\n    \n    require.toUrl = function(name) {\n        return toUrl(name, false);\n    };\n    require.specified = function(name) {\n        return modules.hasOwnProperty(name);\n    };\n    require.onError = function(reason) {\n        console.error(reason);\n    };\n    \n    require.resetContext();\n    \n    function define(name, deps, factory) {\n        if(typeof name !== 'string') {\n            factory = deps;\n            deps = name;\n            name = null;\n        }\n        if(!Array.isArray(deps)) {\n            factory = deps;\n            deps = [];\n        }\n        var deferred = pendingModule;\n        if(name === null && !deferred) {\n            throw new Error('Unexpected define!');\n        } else if (name === null || deferred && deferred.name === name) {\n            var module = _require(deps, factory, deferred.reject, deferred.path);\n            deferred.resolve(module);\n        } else {\n            predefines[name] = [deps, factory, null];\n        }\n    }\n    define.amd = {};\n    \n\n\n    global.define = define;\n    global.require = require;\n    global.requirejs = require;\n})(window);\n"],"sourceRoot":"/source/"}